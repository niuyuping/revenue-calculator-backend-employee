# 生产环境配置
spring.profiles.active=prod

# 生产环境日志配置
logging.level.root=WARN
logging.level.jp.asatex.revenue_calculator_backend_employee=INFO
logging.level.org.springframework.web.reactive=WARN
logging.level.org.springframework.r2dbc=WARN
logging.level.io.r2dbc.postgresql=WARN
logging.level.org.flywaydb=WARN
logging.level.org.springdoc=WARN

# 生产环境使用JSON格式日志
logging.pattern.console={"timestamp":"%d{yyyy-MM-dd HH:mm:ss.SSS}","level":"%-5level","thread":"%thread","logger":"%logger{36}","message":"%msg","traceId":"%X{traceId:-}","spanId":"%X{spanId:-}","service":"revenue-calculator-employee"}%n

# 生产环境日志文件配置
logging.file.name=/var/log/revenue-calculator/employee.log
logging.logback.rollingpolicy.max-file-size=500MB
logging.logback.rollingpolicy.max-history=60
logging.logback.rollingpolicy.total-size-cap=10GB

# 生产环境数据库配置（使用环境变量）
spring.r2dbc.url=${DB_URL:r2dbc:postgresql://localhost:5432/asatex-revenue}
spring.r2dbc.username=${DB_USERNAME:db_user}
spring.r2dbc.password=${DB_PASSWORD:local}
spring.r2dbc.pool.max-size=${DB_POOL_MAX_SIZE:20}
spring.r2dbc.pool.max-idle-time=${DB_POOL_MAX_IDLE_TIME:PT30M}
spring.r2dbc.pool.max-life-time=${DB_POOL_MAX_LIFE_TIME:PT1H}

# 生产环境Flyway配置
spring.flyway.url=${DB_URL:jdbc:postgresql://localhost:5432/asatex-revenue}
spring.flyway.user=${DB_USERNAME:db_user}
spring.flyway.password=${DB_PASSWORD:local}

# 生产环境服务器配置
server.port=${SERVER_PORT:9001}

# 生产环境Actuator配置
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never

