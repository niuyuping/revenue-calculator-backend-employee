# 测试环境配置

# 测试环境数据库配置
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/asatex-revenue-test
spring.r2dbc.username=db_user
spring.r2dbc.password=local
spring.r2dbc.pool.initial-size=1
spring.r2dbc.pool.max-size=5
spring.r2dbc.pool.max-idle-time=PT5S
spring.r2dbc.pool.max-life-time=PT5S

# 测试环境Flyway配置
spring.flyway.url=jdbc:postgresql://localhost:5432/asatex-revenue-test
spring.flyway.user=db_user
spring.flyway.password=local

# 测试环境日志配置
logging.level.root=WARN
logging.level.jp.asatex.revenue_calculator_backend_employee=INFO
logging.level.org.springframework.web.reactive=WARN
logging.level.org.springframework.r2dbc=WARN
logging.level.io.r2dbc.postgresql=WARN

# 测试环境不写入日志文件
logging.file.name=

# 测试环境使用简单控制台日志
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# 测试环境禁用缓存和Redis
spring.cache.type=none
spring.data.redis.repositories.enabled=false

# 测试环境禁用Resilience4j - 通过不配置实例来禁用

# 测试环境允许Bean定义覆盖
spring.main.allow-bean-definition-overriding=true

# 测试环境健康检查配置
management.endpoint.health.show-details=always
management.health.db.enabled=true
management.health.redis.enabled=false
