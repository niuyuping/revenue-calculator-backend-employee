# Test environment configuration

# Test environment database configuration
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/asatex-revenue-test
spring.r2dbc.username=db_user
spring.r2dbc.password=local
spring.r2dbc.pool.initial-size=1
spring.r2dbc.pool.max-size=5
spring.r2dbc.pool.max-idle-time=PT5S
spring.r2dbc.pool.max-life-time=PT5S

# Test environment Flyway configuration
spring.flyway.url=jdbc:postgresql://localhost:5432/asatex-revenue-test
spring.flyway.user=db_user
spring.flyway.password=local


# Test environment enables Redis cache
spring.cache.type=redis
spring.cache.redis.time-to-live=1800000
spring.cache.redis.cache-null-values=false

# Test environment Redis configuration - using local Docker Redis
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.database=0
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Test environment disables Resilience4j - disabled by not configuring instances

# Test environment allows Bean definition overriding
spring.main.allow-bean-definition-overriding=true

# Test environment health check configuration
management.endpoint.health.show-details=always
management.health.db.enabled=true
management.health.redis.enabled=true
